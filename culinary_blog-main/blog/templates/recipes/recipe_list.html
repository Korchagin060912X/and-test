{% extends 'base.html' %}
{% load static %}

{% block title %}–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã - –ö—É–ª–∏–Ω–∞—Ä–Ω—ã–π –±–ª–æ–≥{% endblock %}

{% block content %}
<div class="recipes-header">
    <h2>–í—Å–µ —Ä–µ—Ü–µ–ø—Ç—ã</h2>
    <p class="subtitle">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –≤–∫—É—Å–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –Ω–∞ –ª—é–±–æ–π —Å–ª—É—á–∞–π</p>
</div>

<!-- –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
<div class="categories-filter">
    <a href="{% url 'recipes:recipe_list' %}" 
       class="category-btn {% if not selected_category %}active{% endif %}">
        –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    </a>
    {% for cat in categories %}
    <a href="{% url 'recipes:recipe_list' %}?category={{ cat.slug }}" 
       class="category-btn {% if selected_category == cat %}active{% endif %}">
        {{ cat.name }}
    </a>
    {% endfor %}
</div>

<!-- –°–µ—Ç–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤ -->
<div class="recipes-grid">
    {% for recipe in page_obj %}
    <article class="recipe-card">
        {% if recipe.image %}
        <div class="recipe-image">
            <a href="{{ recipe.get_absolute_url }}">
                <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
            </a>
        </div>
        {% else %}
        <div class="recipe-image placeholder">
            <a href="{{ recipe.get_absolute_url }}">
                <span>üçΩÔ∏è</span>
            </a>
        </div>
        {% endif %}
        <div class="recipe-content">
            {% if recipe.category %}
            <span class="recipe-category">{{ recipe.category.name }}</span>
            {% endif %}
            <h3 class="recipe-title">
                <a href="{{ recipe.get_absolute_url }}">{{ recipe.title }}</a>
            </h3>
            <p class="recipe-description">{{ recipe.description|truncatewords:20 }}</p>
            <div class="recipe-meta">
                <span class="meta-item">‚è±Ô∏è {{ recipe.cooking_time }} –º–∏–Ω</span>
                <span class="meta-item">üçΩÔ∏è {{ recipe.servings }} –ø–æ—Ä—Ü.</span>
            </div>
            <a href="{{ recipe.get_absolute_url }}" class="recipe-link">–ß–∏—Ç–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç ‚Üí</a>
        </div>
    </article>
    {% empty %}
    <div class="empty-state">
        <p>–†–µ—Ü–µ–ø—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ó–∞–π–¥–∏—Ç–µ –ø–æ–∑–∂–µ!</p>
    </div>
    {% endfor %}
</div>

<!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
{% if page_obj.has_other_pages %}
<div class="pagination">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}{% if selected_category %}&category={{ selected_category.slug }}{% endif %}" class="page-link">‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è</a>
    {% endif %}
    
    <span class="page-info">
        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
    </span>
    
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}{% if selected_category %}&category={{ selected_category.slug }}{% endif %}" class="page-link">–°–ª–µ–¥—É—é—â–∞—è ‚Üí</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
